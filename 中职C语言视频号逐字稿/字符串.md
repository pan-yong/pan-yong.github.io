## 字符串

###### 一、 字符串概念

> 以 `'\0'` 结束的字符数组。字符串常量：双引号括起来的一串字符，末尾自动带 `'\0'` 。
>

1. 下面程序输出结果是（            ）

```c
#include<stdio.h>
#include<string.h>
main(){
    char a[10]="abcdefg", b[10]={'a','b','c','d','e','f','g','\0'}, c[]={'a','b','c','d','e','f','g'};
    printf("%d,%d,%d,%d,%d", sizeof(a), strlen(a), sizeof(b), strlen(b), sizeof(c));
}
```

2. 下面程序输出结果是（            ）

```tex
char a[10] = {"abc\18d\0de"};
printf("%d %d", sizeof(a), strlen(a));
```

3. 下面程序段的运行结果是（        ）

```c
char c[5] = {'a','b','\0','c','\0'};
printf("%s", c);
	A. 'a' 'b'        B. ab        C. ab c 
```

###### 二、字符串的输入输出

1. 有两个字符数组a[80]和b[80]，则正确的输入形式是（        ）

```c
A. gets(a,b);		B. scanf("%s%s",a,b);	C. scanf("%s%s",&a,&b);		D.gets("a"),gets("b");
```

2. 下面程序段运行结果是（         ）

```tex
char a[3], b[] = "China";
a = b;  printf("%s", a);
A. 运行后将输出China		B. 运行后将输出Ch		C. 运行后将输出Chi	D. 编译出错
```

3. 下面程序运行结果是（        ）

> scanf() 与 gets() 的区别：scanf 可以一次输入多个字符串，但是输入的字符串不能包含空格。gets一次只能输入一个字符串，但可以包含空格。

```tex
int main()
{   char a1[5], a2[5], a3[5], a4[5];
    scanf("%s%s", a1, a2);
    gets(a3);gets(a4);
    puts(a1);puts(a2);puts(a3);puts(a4);
}
输入数据为：
    aa bb<回车>
    cc dd<回车>
则程序运行结果是____________
    A.aa         B. aa        C. aa	     D. aa bb
      bb            bb           bb         cc
                    cc           cc dd      dd
      cc dd         dd           ee
```

6. 当运行一些程序时，从键盘输入`AhaMA Aha<回车>` ，则下面程序的运行结果是（                                  ）

```c
#include<stdio.h>
int main()
{
    char s[80], c = 'a'; int i = 0;
    scanf("%s", s);
    while(s[i]!='\0')
    {
        if(s[i]==c) s[i] -= 32;
        else if(s[i]==c-32) s[i] +=32;
        i++;
    }
    printf("%s", s);
    return 0;
}
```

**巩固练习**



###### 二、字符串函数

1. 下面程序输出结果是（        ）

```c
char a[] = "abc\18d\0def";
printf("%d %d", sizeof(a), strlen(a));
```

2. 判断字符串a和b是否相等，应当使用（        ）

```c
A. if (a==b)        B. if (a=b)        C. if (strcpy(a,b))    D. if (strcmp(a,b) == 0)
```

3. 下面程序运行结果是（         ）

```tex
从键盘输入：
BOOK
CUT
GAME
PAGE
下面程序运行结果是___________
main()
{
    int i; char str[10], temp[10] = "Control";
    for (i = 0; i < 4; i++){
        gets(str);
        if (strcmp(temp, str) < 0) strcpy(temp, str);
    }
    puts(temp);
}
```

4. 下面程序运行结果是（        ）

```c
main()
{
    char a[80] = "AB", b[80] = "LMNP";
    strcat(a+1, b);
    int i = 0;
    while (a[i++] != '\0') b[i] = a[i];
    puts(b);
}
```

###### 三、字符串函数的实现

- unsigned int strlen(char *s);

```c
unsigned int strlen(char s[])
{
    unsigned int n = 0;
    while (s[n] != '\0')
        n++;
    return n;
}
```

- char \*strcpy(char  dest[], const char src[]);

```c
char *strcpy(char  dest[], const char src[]) 
{   int i = 0; 
    while ((dest[i] = src[i]) != '\0') 
     	i++; 
    return dest;
}
```

- char *strcat(char  dest[] , const char  src[]);

```c
 char* strcat(char dest[], char src[]) 
 {  /* strcat: concatenate t to end of s; s must be big enough */  
     int i = 0, j = 0; 
     while (dest[i] != '\0') /* find end of s */ 
     	i++; 
     while ((dest[i++] = src[j++]) != '\0') /* copy t */ 
     	; 
     return dest;
 }
```

- int strcmp(const char *s,const char *t);

```c
/* strcmp: return <0 if s<t, 0 if s==t, >0 if s>t */ 
 int strcmp(char *s, char *t) 
 {   int i; 
     for (i = 0; s[i] == t[i]; i++) 
     	if (s[i] == '\0') 
     		return 0; 
     return s[i] - t[i]; 
 }
```

###### 四、字符串高考题

1. （2018）下面程序运行结果是（        ）

```c
int main()
{
    char str[50] = "welcome2018";
    int i, n = 0;
    for(i = 0; str[i] != '\0'; i++)
        if('0' <= str[i] && str[i] <= '9')
            m = n*10 + str[i] - '0';
    printf("result=%d",n);
}
```

2. （2015）函数convertNum用于实现无符号十进制数到其它进制数的转换，转换结果的每一位以字符存储于字符数组s中（如十进制3转换为二进制后，数组s中存储的字符串为11），参数srclnt为待转换数据，d为转换的目标进制。函数convertNum转换成功返回l，失败返回0。以下程序只允许修改三行。

```c
L1    #include <stdio.h>
L2    #include <stdlib.h>
L3    #define M sizeof(unsigned int)*8
L4    int convertNum(unsigned srclnt,int d,char s[])
L5    {
L6        static char digits[]="0123456789ABCDEF";
L7        char buf[M+1];
L8        int j,i=M;
L9        if(d<2||d>16)
L1O       {
L11            s[0]='\0';
L12            return 0;
L13       }
L14       buf[i]='\0';
L15       do
L16       {
L17            buf[--i]=digits[srclnt/d];
L18            srclnt=srclnt%d;
L19       }while(srclnt);
L20       for(j=0;buf[i]!='\0';j++,i++)
L21       {
L22          s[j]=buf[i];
L23       }
L24       s[j+1]='\0';
L25       return 1;
L26   }
```

3. （2007）下面程序的功能是：从字符串str中，删除所有字母c，不区分大小写。输入字符串`abcCdefcfCg` ，删除后的字符串为`abdefg`。程序有两处错误，请指出所在行并改正。 

```c
L1   int main()
L2   {
L3       char str[81]; 
L4       int i = 0, j = 0;
L5       gets(str);
L6       while(str[i] != '\0')
L7       {
L8           if(str[i]!='c' || str[i] != 'C')
L9               str[j] = str[i];
L10          i++;
L11      }
L12      str[j] = '\0';
L13      printf("删除后的字符串：%s", str);
L14  }
```

