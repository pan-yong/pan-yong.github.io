## 插入排序

###### 一、插入排序一个数

<img src=".\images\insert.png" alt="img" style="zoom:150%;" />

如图所示，左手牌2、4、5、10有序，右手牌7插入到左手依然保持有序，这个过程怎么用代码实现？

> Step 1：比较。右手牌，和左手中的牌从后往前一个一个比。
>
> Step 2：后移。比较过程中，左手牌大则左手牌后移并继续比，左手牌小则找到插入点比较结束。
>
> Step 3：插入。插入点在比较结束点之后。

```c
//举例：把7插入到数组中使其仍然保持升序。
int main()
{
    int a[5] = {2,4,5,9}, k = 7, j;
    for (j = 3; j >= 0; j--)
        if (a[j] > k) a[j+1] = a[j];
        else break;
    a[j+1] = k;
}
```

```c
//变形：把上面程序中if判断条件合并到for条件判断语句中。
int main()
{
    int a[5] = {2,4,5,9}, k = 7, j;
    for (j = 3; ______(1)______; j--)
        a[j+1] = a[j];
    a[j+1] = k;
}
```

```c
//变形：把for改写成while
int main()
{
    int a[5] = {2,4,5,9}, k = 7, j;
    j = 3;
    while ( ____(2)_____ ){
        a[j+1] = a[j];
        j--;
    }
    a[j+1] = k;
}
```

###### 二、插入排序N个数

插入排序N个数，其实就是，插入排序一个数，重复N次。要注意的是，每插入一个数，左手中的牌也就多了一张。假如N张牌用数组 `int a[N];` 表示，我们用 `i` 作为分界点，`a[0] ~ a[i-1]` 是左手牌（已排好序），`a[i] ~ a[N-1]` 是桌面牌（待排序），初始  `i = 1` 表示左手中只有一张牌`a[0]` 自然是有序的。 排序过程：

> Step 1 :   右手从桌面拿一张牌
>
> Step 2：比较，后移，插入到左手
>
> Step 3： 充数1、2步N-1次完成排序。

```c
// 参考代码
#define N 5
int a[N] = {5,4,2,9,7}, i, j, k;
for (i = 1; i < N; i++) //左手牌a[0]~a[i-1], 桌面牌a[i]~a[N-1]，初始i=1，依次遍历桌面牌。 
{
    k = a[i]; // 右手从桌面抓牌
    for (j = i - 1; j >= 0; j--) //从后往前，遍历左手牌
    {
        if (a[j] > k) a[j+1] = a[j]; // 左手牌大，左手牌后移
        else break;  //左手牌小，找到插入点在j之后，结束比较
    }
    a[j+1] = k; //右手牌插入到左右。
}
```

###### 三、课堂练习

1. 下面程序输出结果是（            ）

```c
int main()
{
    int a[6] = {7,4,3,2,1}, i, k = 6;
    for(i = 4; i >= 1; i--)
        a[i+1] = a[i];
    a[i+1] = k;
    for(i = 0; i < 6; i++)
        printf("%d",a[i]);
    return 0;
}
```

2.有数组`int a[6] = {1,2,3,4,7}`,把`k=6`插入到数组使其仍然保持为升序，请填空。

```c
#include<stdio.h>
int main(  )
{
    int a[6] = {1,2,3,4,7}, i, k = 6;
    for(i = 4; i >= 0; i--)
        if( ____(1)____ )  a[i+1] = a[i];
        else   ______(2)_______
     ____(3)___ = k;
    for(i = 0; i < 6; i++)
        printf("%d",a[i]);
}
```

3.（2018年）下面程序输出结果是（        ）

```c
void fun(int w[], int m, int n)
{
        int i, j, t;
        for(i = m; i < n; i++){
            t = w[n-1];
            for(j=n-2; j >= 0; j--)
                w[j+1] = w[j];
            w[0] = t;
        } 
}
int main()
{
    int i, a[9] = {1,2,3,4,5,6,7,8,9};
    fun(a,4,9);
    for(i = 0; i < 9; i++)
        printf("%d", a[i]);
}
```

4.（2019年）下面程序功能是用插入排序法对数组中的元素按从小到大进行排序。以下程序只允许修改两行。

```c
void f(int a[], int N)
{
    int i, j, t;
    for(i = 1; i < N; i++)
    {
        t = a[i];
        for(j = i - 1; j >= 0; j--)
            a[j+1] = a[i];
        a[j+1] = t;
    }
}
int main()
{
    int i;
    int a[5] = {12,45,3,-98,32};
    f(a,5);
    for(i = 0; i < 5; i++)
        printf("%4d", a[i]);
}
```

5.（2008年）下面程序功能是采用简单插入排序法，随机产生10个整数，按从小到大的顺序排序。在程序中有两处错误，请标记并改正。

```c
#include<stdio.h>
#include<stdlib.h>
int main()
{
    int i, j, a[11];
    for(i = 1; i < 11; i++)
        a[i] = rand();
    for(i = 2; i < 11; i++)
    {
        a[0] = a[i];
        for(j = i - 1; j >= 1; j--)
            if(a[0] < a[j])
                a[j-1] = a[j];      
            else
                continue;
        a[j+1] = a[0];
    }
    for(i = 1; i < 11; i++)
        printf("%d ", a[i]);
}
```

###### 四、课后作业

